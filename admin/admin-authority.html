<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>권한 관리</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard@1.3.8/dist/web/static/pretendard.css">
</head>
<!-- 기존 body 태그에 클래스만 추가 -->
<body class="authority-page">

<!-- 상단 헤더 -->
<header class="admin-header">
  <div class="header-left">서비스 관리</div>
  <nav class="admin-nav">
    <a href="members.html" class="active">회원 관리</a>
    <a href="admin-point-history.html">포인트 관리</a>
    <a href="admin-meeting.html">모임 관리</a>
    <a href="admin-review.html">장소 관리</a>
    <a href="#">신고 관리</a>
    <a href="#">제재 관리</a>
  </nav>
</header>

<!-- 전체 레이아웃 -->
<div class="admin-container">
  <!-- 사이드바 -->
  <aside class="admin-sidebar">
    <ul>
      <li><a href="members.html">전체 회원 조회</a></li>
      <li><a href="admin-authority.html" class="active">권한 관리</a></li>
      <li><a href="admin-post-history.html">게시글 내역 조회</a></li>
      <li><a href="admin-comment-history.html">댓글 내역 조회</a></li>
    </ul>
  </aside>


  <!-- 메인 콘텐츠 -->
  <main class="admin-main">
    <div class="main-header">
      <h1>사업자 권한 요청 목록</h1>
      <div class="filter-box">
        <label>
          상태:
          <select>
            <option>전체</option>
            <option>승인</option>
            <option>거절</option>
            <option>대기</option>
          </select>
        </label>
        <button>검색</button>
      </div>
    </div>

    <table>
      <thead>
      <tr>
        <th>사업자 ID</th>
        <th>사업자 이름</th>
        <th>상태</th>
        <th>사업자 등록증</th>
        <th>처리 날짜</th>
        <th>거절 사유</th>
      </tr>
      </thead>
      <tbody>
      <!-- 17줄 예시 데이터 -->
      <tr><td>11</td><td>김은지</td><td>대기</td><td><a href="#" onclick="openModal(11, '김은지', 'kim@biz.com', '/uploads/biz11.pdf')">보기</a></td><td>-</td><td>-</td></tr>
      <tr><td>12</td><td>박준형</td><td>대기</td><td><a href="#">보기</a></td><td>-</td><td>-</td></tr>
      <tr><td>13</td><td>이하늘</td><td>대기</td><td><a href="#">보기</a></td><td>-</td><td>-</td></tr>
      <tr><td>14</td><td>홍길동</td><td>대기</td><td><a href="#">보기</a></td><td>-</td><td>-</td></tr>
      <tr><td>15</td><td>김민수</td><td>승인</td><td><a href="#">보기</a></td><td>2024-12-01</td><td>-</td></tr>
      <tr><td>16</td><td>이서준</td><td>거절</td><td><a href="#">보기</a></td><td>2024-12-01</td><td>등록 정보 불일치</td></tr>
      <tr><td>17</td><td>배수진</td><td>승인</td><td><a href="#">보기</a></td><td>2025-01-03</td><td>-</td></tr>
      <tr><td>18</td><td>최지훈</td><td>거절</td><td><a href="#">보기</a></td><td>2025-01-05</td><td>사진 불분명</td></tr>
      <tr><td>19</td><td>윤하늘</td><td>대기</td><td><a href="#">보기</a></td><td>-</td><td>-</td></tr>
      <tr><td>20</td><td>정수빈</td><td>거절</td><td><a href="#">보기</a></td><td>2025-02-10</td><td>등록증 파일 손상</td></tr>
      <tr><td>21</td><td>허윤서</td><td>승인</td><td><a href="#">보기</a></td><td>2025-02-12</td><td>-</td></tr>
      <tr><td>22</td><td>서지우</td><td>거절</td><td><a href="#">보기</a></td><td>2025-03-01</td><td>서류 누락</td></tr>
      <tr><td>23</td><td>문재현</td><td>대기</td><td><a href="#">보기</a></td><td>-</td><td>-</td></tr>
      <tr><td>24</td><td>백예린</td><td>승인</td><td><a href="#">보기</a></td><td>2025-03-10</td><td>-</td></tr>
      <tr><td>25</td><td>윤도현</td><td>거절</td><td><a href="#">보기</a></td><td>2025-03-10</td><td>사업자번호 불일치</td></tr>
      <tr><td>26</td><td>조유미</td><td>대기</td><td><a href="#">보기</a></td><td>-</td><td>-</td></tr>
      <tr><td>27</td><td>문지훈</td><td>승인</td><td><a href="#">보기</a></td><td>2025-04-01</td><td>-</td></td></tr>
      </tbody>
    </table>


    <!-- 페이지네이션 -->
    <div class="pagination">
      <button class="page-nav">&laquo;</button>
      <button class="page-nav">&lt;</button>
      <button class="page-btn active">1</button>
      <button class="page-btn">2</button>
      <button class="page-btn">3</button>
      <button class="page-btn">4</button>
      <button class="page-btn">5</button>
      <button class="page-btn">6</button>
      <button class="page-btn">7</button>
      <button class="page-btn">8</button>
      <button class="page-btn">9</button>
      <button class="page-btn">10</button>
      <button class="page-nav">&gt;</button>
      <button class="page-nav">&raquo;</button>
    </div>
  </main>

</div>
<!-- 모달 영역 -->
<div class="modal-overlay" id="bizModal">
  <div class="modal-content">
    <h2>사업자 등록 요청 상세</h2>
    <div class="modal-info-wrapper">
      <div class="modal-pdf">
        <iframe id="bizPdf" src="" title="사업자 등록증"></iframe>
      </div>
      <div class="modal-info">
        <p><strong>사업자 ID:</strong> <span id="bizId"></span></p>
        <p><strong>사업자 이름:</strong> <span id="bizName"></span></p>
        <p><strong>이메일:</strong> <span id="bizEmail"></span></p>
      </div>
    </div>
    <div class="modal-action">
      <label>처리 상태:
        <select id="processStatus">
          <option value="">선택</option>
          <option value="approve">승인</option>
          <option value="reject">거절</option>
        </select>
      </label>
      <label>거절 사유:
        <input type="text" id="rejectReason" placeholder="(거절 시 입력)" />
      </label>
    </div>
    <div class="modal-buttons">
      <button onclick="handleBizDecision()">처리</button>
      <button onclick="closeModal()">닫기</button>
    </div>
  </div>
</div>

<script>
  function openModal(id, name, email, pdfUrl) {
    document.getElementById("bizId").textContent = id;
    document.getElementById("bizName").textContent = name;
    document.getElementById("bizEmail").textContent = email;
    document.getElementById("bizPdf").src = pdfUrl;
    document.getElementById("bizModal").style.display = "flex";
  }
  function closeModal() {
    document.getElementById("bizModal").style.display = "none";
  }
  function handleBizDecision() {
    const status = document.getElementById("processStatus").value;
    const reason = document.getElementById("rejectReason").value;
    if (!status) return alert("처리 상태를 선택하세요.");
    if (status === "reject" && !reason) return alert("거절 사유를 입력하세요.");
    alert(`처리 완료: ${status === "approve" ? "승인" : `거절 - 사유: ${reason}`}`);
    closeModal();
  }
</script>

</body>
</html>
